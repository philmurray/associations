<div class='page-game {{color.css_class}}'>

	<a ng-if="!playing" class="navbar-brand" href="#/">Associations</a>

	<div ng-if="playing" class="word-entry panel panel-default">
		<div class="panel-heading">
			<h4>
				<span>Time Left: {{timeLeft}}</span>
				<span class="pull-right"><a ng-click="skipWord()">Skip...</a></span>
			</h4>
		</div>
		<div class="panel-body">
			<h2 class="text-center">{{playing.word}}</h2>
		</div>
		<div class="panel-footer">
			<select-word selected="chosenWord" class='select-word'></select-word>
		</div>
	</div>

	<div class="players" ng-if="!playing" ng-class="{expanded:playersExpanded}">
		<div class="btn-group-vertical">
			<!-- TODO: split this out into templates or something... -->
			<button
				ng-repeat="p in game.players | orderBy:'score':true"
				ng-disabled="!p.completed"
				ng-click="activatePlayer(p)"
				class="player btn btn-sm {{(p.completed && p.color.css_class) || 'btn-default'}}"
				ng-class="{active: p.active, 'btn-xs':!playersExpanded, 'btn-sm':playersExpanded, winner:p.winner}">
				<div>
					<h5>
						<i ng-if="p.winner" class="fa fa-star"></i>
						<span ng-if="playersExpanded">{{p.alias}}</span>
						<span ng-if="!playersExpanded">{{p.alias | limitTo:1}}</span>
					</h5>
					<p>
						{{getStatus(p)}}
					</p>
				</div>
			</button>
			<button class="btn btn-default expander" ng-click="playersExpanded=!playersExpanded" ng-class="{'btn-xs':!playersExpanded, 'btn-sm':playersExpanded}">
				<i class="fa" ng-class="{'fa-chevron-right': playersExpanded, 'fa-chevron-left': !playersExpanded}"></i>
			</button>
		</div>
	</div>

	<div class="context-controls panel panel-default" ng-if="!playing && selected">
		<div class="panel-heading">
			{{selected.label}}
		</div>
		<div class="panel-body">
			<a ng-if="selected.from" ng-click="selected.expanded = !selected.expanded">{{selected.expanded ? 'Collapse' : 'Expand'}}</a>
			<a href="#/exploreWords?word={{selected.label}}=&otherWord=">Explore</a>
		</div>
	</div>

	<div game-graph
		graph-model="game"
		graph-config="graphConfig"
		graph-playing="playing"
		graph-selected="selected"
		style="width: 100%; height: 100%;"></div>
</div>
